{"version":3,"sources":["index.js"],"names":["$","mCustomScrollbar","player","progress","voiceProgress","$audio","Player","initMusicInfo","music","$musicImage","$musicName","$musicSinger","$musicAblum","$musicProgressName","$musicProgressTime","attr","cover","text","name","singer","album","time","$musicBg","css","initMusicLyric","lyric","Lyric","link_lrc","$lryicContainer","html","loadLyric","lyrics","index","ele","$item","ajax","getPlayerList","url","dataType","data","musicList","$musicList","get","crateMusicItem","error","e","console","log","initProgress","$progressBar","$progressLine","$progressDot","Progress","progressClick","value","progressMove","$voiceLine","$voiceDot","$voiceBar","musicVoiceSeekTo","delegate","find","stop","fadeIn","fadeOut","this","toggleClass","parents","hasClass","$musicPlay","siblings","removeClass","addClass","playMusic","click","currentIndex","eq","trigger","preIndex","musicTimeUpdate","changeMusic","each","currentTime","setProgress","duration","timeStr","marginTop","initEvents"],"mappings":"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","file":"index.min.js","sourcesContent":["$(function () {\n    // 0.自定义滚动条\n    $(\".content_list\").mCustomScrollbar();\n\n    var $audio = $(\"audio\");\n    var player = new Player($audio);\n    var progress;\n    var voiceProgress;\n    var lyric;\n\n    // 1.加载歌曲列表\n    getPlayerList();\n    function getPlayerList() {\n        $.ajax({\n            url: \"./source/musiclist.json\",\n            dataType: \"json\",\n            success: function (data) {\n                player.musicList = data;\n                // 3.1遍历获取到的数据, 创建每一条音乐\n                var $musicList = $(\".content_list ul\");\n                $.each(data, function (index, ele) {\n                    var $item = crateMusicItem(index, ele);\n                    $musicList.append($item);\n                });\n                initMusicInfo(data[0]);\n                initMusicLyric(data[0]);\n            },\n            error: function (e) {\n                console.log(e);\n            }\n        });\n    }\n\n    // 2.初始化歌曲信息\n    function initMusicInfo(music){\n        // 获取对应的元素\n        var $musicImage = $(\".song_info_pic img\");\n        var $musicName = $(\".song_info_name a\");\n        var $musicSinger = $(\".song_info_singer a\");\n        var $musicAblum = $(\".song_info_ablum a\");\n        var $musicProgressName = $(\".music_progress_name\");\n        var $musicProgressTime = $(\".music_progress_time\");\n        var $musicBg = $(\".mask_bg\");\n\n        // 给获取到的元素赋值\n        $musicImage.attr(\"src\", music.cover);\n        $musicName.text(music.name);\n        $musicSinger.text(music.singer);\n        $musicAblum.text(music.album);\n        $musicProgressName.text(music.name +\" / \"+ music.singer);\n        $musicProgressTime.text(\"00:00 / \"+ music.time);\n        $musicBg.css(\"background\", \"url('\"+music.cover+\"')\");\n    }\n\n    // 3.初始化歌词信息\n    function initMusicLyric(music){\n        lyric = new Lyric(music.link_lrc);\n        var $lryicContainer = $(\".song_lyric\");\n        // 清空上一首音乐的歌词\n        $lryicContainer.html(\"\");\n        lyric.loadLyric(function () {\n            // 创建歌词列表\n            $.each(lyric.lyrics, function (index, ele) {\n                var $item = $(\"<li>\"+ele+\"</li>\");\n                $lryicContainer.append($item);\n            });\n        });\n    }\n\n    // 4.初始化进度条\n    initProgress();\n    function initProgress(){\n        var $progressBar = $(\".music_progress_bar\");\n        var $progressLine = $(\".music_progress_line\");\n        var $progressDot = $(\".music_progress_dot\");\n        progress = Progress($progressBar,$progressLine,$progressDot);\n        progress.progressClick(function (value) {\n            player.musicSeekTo(value);\n        });\n        progress.progressMove(function (value) {\n            player.musicSeekTo(value);\n        });\n\n\n        var $voiceBar = $(\".music_voice_bar\");\n        var $voiceLine = $(\".music_voice_line\");\n        var $voiceDot = $(\".music_voice_dot\");\n        voiceProgress = Progress($voiceBar,$voiceLine,$voiceDot);\n        voiceProgress.progressClick(function (value) {\n            player.musicVoiceSeekTo(value);\n        });\n        voiceProgress.progressMove(function (value) {\n            player.musicVoiceSeekTo(value);\n        });\n    }\n\n    // 5.初始化事件监听\n    initEvents();\n    function initEvents() {\n        // 1.监听歌曲的移入移出事件\n        $(\".content_list\").delegate(\".list_music\", \"mouseenter\", function () {\n            // 显示子菜单\n            $(this).find(\".list_menu\").stop().fadeIn(100);\n            $(this).find(\".list_time a\").stop().fadeIn(100);\n            // 隐藏时长\n            $(this).find(\".list_time span\").stop().fadeOut(100);\n        });\n        $(\".content_list\").delegate(\".list_music\", \"mouseleave\", function () {\n            // 隐藏子菜单\n            $(this).find(\".list_menu\").stop().fadeOut(100);\n            $(this).find(\".list_time a\").stop().fadeOut(100);\n            // 显示时长\n            $(this).find(\".list_time span\").stop().fadeIn(100);\n        });\n\n        // 2.监听复选框的点击事件\n        $(\".content_list\").delegate(\".list_check\", \"click\", function () {\n            $(this).toggleClass(\"list_checked\");\n        });\n\n        // 3.添加子菜单播放按钮的监听\n        var $musicPlay = $(\".music_play\");\n        $(\".content_list\").delegate(\".list_menu_play\", \"click\", function () {\n            var $item = $(this).parents(\".list_music\");\n\n            // console.log($item.get(0).index);\n            // console.log($item.get(0).music);\n\n            // 3.1切换播放图标\n            $(this).toggleClass(\"list_menu_play2\");\n            // 3.2复原其它的播放图标\n            $item.siblings().find(\".list_menu_play\").removeClass(\"list_menu_play2\");\n            // 3.3同步底部播放按钮\n            if($(this).hasClass(\"list_menu_play2\")){\n                // 当前子菜单的播放按钮是播放状态\n                $musicPlay.addClass(\"music_play2\");\n                // 让文字高亮\n                $item.find(\"div\").css(\"color\", \"#fff\");\n                $item.siblings().find(\"div\").css(\"color\", \"rgba(255,255,255,0.5)\");\n            }else{\n                // 当前子菜单的播放按钮不是播放状态\n                $musicPlay.removeClass(\"music_play2\");\n                // 让文字不高亮\n                $item.find(\"div\").css(\"color\", \"rgba(255,255,255,0.5)\");\n            }\n            // 3.4切换序号的状态\n            $item.find(\".list_number\").toggleClass(\"list_number2\");\n            $item.siblings().find(\".list_number\").removeClass(\"list_number2\");\n\n            // 3.5播放音乐\n            player.playMusic($item.get(0).index, $item.get(0).music);\n            // 3.5切换歌曲信息\n            initMusicInfo($item.get(0).music);\n            // 3.6切换歌词信息\n            initMusicLyric($item.get(0).music);\n        });\n\n        // 4.监听底部控制区域播放按钮的点击\n        $musicPlay.click(function () {\n            // 判断有没有播放过音乐\n            if(player.currentIndex == -1){\n                // 没有播放过音乐\n                $(\".list_music\").eq(0).find(\".list_menu_play\").trigger(\"click\");\n            }else{\n                // 已经播放过音乐\n                $(\".list_music\").eq(player.currentIndex).find(\".list_menu_play\").trigger(\"click\");\n            }\n        });\n\n        // 5.监听底部控制区域上一首按钮的点击\n        $(\".music_pre\").click(function () {\n            $(\".list_music\").eq(player.preIndex()).find(\".list_menu_play\").trigger(\"click\");\n        });\n\n        // 6.监听底部控制区域下一首按钮的点击\n        $(\".music_next\").click(function () {\n            $(\".list_music\").eq(player.nextIndex()).find(\".list_menu_play\").trigger(\"click\");\n        });\n        \n        // 7.监听删除按钮的点击\n        $(\".content_list\").delegate(\".list_menu_del\", \"click\", function () {\n            // 找到被点击的音乐\n            var $item = $(this).parents(\".list_music\");\n\n            // 判断当前删除的是否是正在播放的\n            if($item.get(0).index == player.currentIndex){\n                $(\".music_next\").trigger(\"click\");\n            }\n\n            $item.remove();\n            player.changeMusic($item.get(0).index);\n\n            // 重新排序\n            $(\".list_music\").each(function (index, ele) {\n                ele.index = index;\n                $(ele).find(\".list_number\").text(index + 1);\n            });\n        });\n\n        // 8.监听播放的进度\n        player.musicTimeUpdate(function (currentTime, duration, timeStr) {\n            // 同步时间\n            $(\".music_progress_time\").text(timeStr);\n            // 同步进度条\n            // 计算播放比例\n            var value = currentTime / duration * 100;\n            progress.setProgress(value);\n            // 实现歌词同步\n            var index = lyric.currentIndex(currentTime);\n            var $item = $(\".song_lyric li\").eq(index);\n            $item.addClass(\"cur\");\n            $item.siblings().removeClass(\"cur\");\n\n            // 实现歌词滚动\n            if(index <= 2) return;\n            $(\".song_lyric\").css({\n                marginTop: (-index + 2) * 30\n            });\n        });\n        \n        // 9.监听声音按钮的点击\n        $(\".music_voice_icon\").click(function () {\n            // 图标切换\n            $(this).toggleClass(\"music_voice_icon2\");\n            // 声音切换\n            if($(this).hasClass(\"music_voice_icon2\")){\n                // 变为没有声音\n                player.musicVoiceSeekTo(0);\n            }else{\n                // 变为有声音\n                player.musicVoiceSeekTo(1);\n            }\n        });\n    }\n\n    // 定义一个方法创建一条音乐\n    function crateMusicItem(index, music) {\n        var $item = $(\"\" +\n        \"<li class=\\\"list_music\\\">\\n\" +\n            \"<div class=\\\"list_check\\\"><i></i></div>\\n\" +\n            \"<div class=\\\"list_number\\\">\"+(index + 1)+\"</div>\\n\" +\n            \"<div class=\\\"list_name\\\">\"+music.name+\"\" +\n            \"     <div class=\\\"list_menu\\\">\\n\" +\n            \"          <a href=\\\"javascript:;\\\" title=\\\"播放\\\" class='list_menu_play'></a>\\n\" +\n            \"          <a href=\\\"javascript:;\\\" title=\\\"添加\\\"></a>\\n\" +\n            \"          <a href=\\\"javascript:;\\\" title=\\\"下载\\\"></a>\\n\" +\n            \"          <a href=\\\"javascript:;\\\" title=\\\"分享\\\"></a>\\n\" +\n            \"     </div>\\n\" +\n            \"</div>\\n\" +\n            \"<div class=\\\"list_singer\\\">\"+music.singer+\"</div>\\n\" +\n            \"<div class=\\\"list_time\\\">\\n\" +\n            \"     <span>\"+music.time+\"</span>\\n\" +\n            \"     <a href=\\\"javascript:;\\\" title=\\\"删除\\\" class='list_menu_del'></a>\\n\" +\n            \"</div>\\n\" +\n        \"</li>\");\n\n        $item.get(0).index = index;\n        $item.get(0).music = music;\n\n        return $item;\n    }\n});"]}